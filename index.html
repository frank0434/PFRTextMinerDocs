<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text Mining and Webscraping Tools for Plant &amp; Food Research • PFRTextMiner</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Text Mining and Webscraping Tools for Plant &amp; Food Research">
<meta property="og:description" content="Provides tools for implementing webscraping (with authentication)
    of lists, tables and documents (.pdf, .docx, .doc) from iPlant as well as text 
    mining functions for extracting textual data and applying natural language 
    processing techniques.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">PFRTextMiner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/pfrtextminer.html">PFRTextMiner: Webscraping and Text Mining at Plant &amp; Food Research</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/PlantandFoodResearch/PFRTextMiner/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="pfrtextminer" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pfrtextminer" class="anchor"></a>PFRTextMiner</h1></div>
<p>The goal of PFRTextMiner is to provide easy to use functions to scrape data from iPlant, as well as functions to extract text from documents and apply natural language processing techniques.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Before installation, please ensure you have a fresh R environment by restarting the R session (CTRL + SHIFT + F10). You can install the released version of PFRTextMiner from <a href="https://github.com/PlantandFoodResearch/PFRTextMiner">Github</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"PlantandFoodResearch/PFRTextMiner"</span>, <span class="kw">auth_token</span> <span class="kw">=</span> <span class="no">my_pat_token</span>)</pre></div>
<p>Remember to provide your personal access token (PAT) from Github in the field <code>auth_token</code>. For information on generating a personal access token, click <a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">here</a>.</p>
<p>Note: If there are issues with installing the package due to differing versions or other problems, run:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"PlantandFoodResearch/PFRTextMiner"</span>, <span class="kw">auth_token</span> <span class="kw">=</span> <span class="no">my_pat_token</span>, <span class="kw">force</span> <span class="kw">=</span> <span class="no">T</span>, <span class="kw">dependencies</span> <span class="kw">=</span> <span class="no">T</span>)</pre></div>
</div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>PFRTextMiner is an R package designed for webscraping and text mining. The goal of PFRTextMiner is to help automate the tedious webscraping tasks and make applying natural language processing techniques to textual data possible. The main features of this package are:</p>
<ul>
<li>
<code><a href="reference/scrape_list.html">scrape_list()</a></code> scrapes a table or list directly from iPlant into R as a dataframe.</li>
<li>
<code><a href="reference/scrape_xl.html">scrape_xl()</a></code> reads an Excel spreadsheet directly from iPlant into R as a dataframe.</li>
<li>
<code><a href="reference/scrape_file.html">scrape_file()</a></code> downloads any number of files from iPlant to a local folder.</li>
<li>
<code><a href="reference/mine_text.html">mine_text()</a></code> extracts the text data from one or more documents as a tidy format.</li>
<li>
<code><a href="reference/mine_summary.html">mine_summary()</a></code> creates a summary of the n most important sentences of a text.</li>
<li>
<code><a href="reference/mine_keywords.html">mine_keywords()</a></code> extracts the n most frequent keywords from the text and visualises them.</li>
<li>
<code><a href="reference/mine_sentiment.html">mine_sentiment()</a></code> analyses the sentiment of a body of text or sentences.</li>
<li>
<code><a href="reference/highlight_sentiment.html">highlight_sentiment()</a></code> generates an html document of sentiment highlighting of text.</li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>For a more in depth look at how to use the package, please refer to the vignette. This is a basic example which shows you how to solve a common problem:</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="co">#devtools::install_github("PlantandFoodResearch/PFRTextMiner", auth_token = my_token)</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">PFRTextMiner</span>)</pre></div>
<p><code><a href="reference/scrape_list.html">scrape_list()</a></code></p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="co"># The url we want to get the table from.</span>
<span class="no">url</span> <span class="kw">&lt;-</span> <span class="st">"https://iplant.plantandfood.co.nz/project/datamgmt/Lists/Data%20Improvement%20Plan/AllItems.aspx"</span>

<span class="co"># Use the function scrape_list to extract the table from iPlant as a dataframe.</span>
<span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/scrape_list.html">scrape_list</a></span>(<span class="kw">url</span> <span class="kw">=</span> <span class="no">url</span>)
<span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span>
<span class="no">df</span>[<span class="fl">1</span>:<span class="fl">5</span>]
<span class="co">#&gt;                        Title</span>
<span class="co">#&gt; 1   Improve iPlant team page</span>
<span class="co">#&gt; 2 Standardise excel template</span>
<span class="co">#&gt; 3                 File names</span>
<span class="co">#&gt;                                                                   Data_improvement_item</span>
<span class="co">#&gt; 1      Work with Sheree to update team iPlant page so document library suits our needs.</span>
<span class="co">#&gt; 2 Customise PFR excel template to suit team need. Ensure all team members are using it.</span>
<span class="co">#&gt; 3                                            Agree with team on format of naming files.</span>
<span class="co">#&gt;     Assigned_to          Start_date            Due_date</span>
<span class="co">#&gt; 1 Melanie Burns 2018-06-11 00:00:00 2018-08-28 00:00:00</span>
<span class="co">#&gt; 2  Carmel Woods 2018-07-31 00:00:00 2018-08-31 00:00:00</span>
<span class="co">#&gt; 3 Melanie Burns 2018-06-03 00:00:00 2018-07-31 00:00:00</span></pre></div>
<p><code><a href="reference/scrape_xl.html">scrape_xl()</a></code></p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="co"># The url of the Excel spreadsheet we want to read in.</span>
<span class="no">url</span> <span class="kw">&lt;-</span> <span class="st">"https://iplant.plantandfood.co.nz/project/I180822/_layouts/15/WopiFrame2.aspx?sourcedoc=/project/I180822/Research/T3_Maj_Diameter_Manual.xlsx&amp;action=default"</span>

<span class="co"># Use the function scrape_xl to automatically format the url and read the Excel data from iPlant into R as a dataframe.</span>
<span class="no">xl_df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/scrape_xl.html">scrape_xl</a></span>(<span class="kw">url</span> <span class="kw">=</span> <span class="no">url</span>)</pre></div>
<p><code><a href="reference/scrape_file.html">scrape_file()</a></code></p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="co"># The url we want to download the files from.</span>
<span class="no">url</span> <span class="kw">&lt;-</span> <span class="st">"https://iplant.plantandfood.co.nz/Team/sp/DataSci/Administration/Forms/BoardReports.aspx"</span>

<span class="co"># Use the function scrape_file to download the files from the iPlant page.</span>
<span class="fu"><a href="reference/scrape_file.html">scrape_file</a></span>(<span class="kw">url</span> <span class="kw">=</span> <span class="no">url</span>)</pre></div>
<p><code><a href="reference/mine_text.html">mine_text()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="co"># Extract the text from the documents between the titles specified.</span>
<span class="no">text_df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/mine_text.html">mine_text</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="st">"docx"</span>, <span class="kw">path</span> <span class="kw">=</span> <span class="st">"./temp_folder"</span>, <span class="kw">from</span> <span class="kw">=</span> <span class="st">"Impact Highlight"</span>, <span class="kw">to</span> <span class="kw">=</span> <span class="st">"Outputs"</span>)
<span class="no">text_df</span>
<span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            text</span>
<span class="co">#&gt; 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             New Data Science Group and new Data Applications team PFR’s success is based on good quality science that is produced as efficiently and effectively as possible. Data is the key component to this science – for most projects the rate limiting step is no longer collecting the information, rather the processing and analysis. To recognize the importance that efficient data management, processing, analysis and interpretations play, a new group Data Science has been formed, with Linley Jesson as group leader. This group will serve as a central point to improve the quality and efficiency of data processing and analysis throughout the company. The group consists of two teams: Biometrics (led by Ruth Butler) which will continue to play a key role in ensuring the quality of research through encouraging sound trial design, statistical analysis and interpretation of results; and a new team Data Applications (led by Peter Jaksons) to help develop analysis pipelines for new or “difficult” types of data, including machine learning, text and data mining and genomic prediction. To highlight the role that efficient data processing can help to improve our outputs, Data Application team members Linley Jesson and Peter Jaksons have been working with members of the Field Crops group, also in Sustainable Production (Edmar Teixiera, Ellen Hume, Jo Sharp) IKS’s Eric Burgueño and NCI’s Hymmi Kong to deploy the simulation tools APSIM Classic and APSIM Next Generation in High Performance Computing system in powerPlant. The project uses massive parallel computing to automate the generation of input files, run over 500,000 simulations instantly. This tool can simulate crop yield and other key agricultural system’s variables (e.g. water and nitrogen use) across multiple years (e.g. using historical climate or climate change scenarios) and locations (e.g. spatial simulations ranging from within-paddock precision agriculture applications to landscape scale assessments). The gains in performance means we were able to model climate change impacts on crop yields over large regions such as the Hawkes Bay, which is soon to be expanded for all arable land in New Zealand. Running such simulations on a single-core computer would have taken 408 days, as opposed to 1 day spread across over 1000 CPU cores in a high performance computing environment. To analyse and interpret the large number of APSIM output files user-friendly interactive visualization tools have been developed using R-shiny, including one by summer student Doney Zhang which maps the outcome of precision management applications to spatially variable enterprises. Other examples of data pipelines in which the new Data Applications team has already been instrumental in are genomic selection projects for both apples and kiwifruit. In these cases setting up workflows to combine data from various sources (genomic, phenotypic, pedigree) and being able to handle these large data sets improves both the reliability and quality of the research and at the same time reduces the time cost of these and future genomic selection projects. The data applications team will continue to help scientists to develop and increase efficiency for these sorts of pipelines, and improve the type of automated reporting to clients.</span>
<span class="co">#&gt; 2 “Small data, Big impact” In PFR, the majority of data sets collected are “small’, of a size that is easily stored within Excel. Thus, these small datasets remain the back-bone of research data collected by PFR, even with the rise of “big data”. Poor management of such small data results in a major a drain on resources: manipulation to enable analysis is time consuming and frequently error-prone, even to the point of making data unusable. At best, this is a waste of effort and at worst is a loss of potential impact or publications. Therefore, it is imperative for the quality of PFR’s science that we have processes in place to ensure the quality of “small data”, particularly that stored in Excel. To this end, the Data Management in Practice project (DMiP) was initiated in August 2016, and ran for 18 months. The project was supported by Blue Skies money, and the team comprised four biometricians, plus two scientists from outside the Data Science group. We developed several tools, ‘How-to’ documents and guidelines, which are available on the ‘Data Management’ iPlant site (Figure 1). Figure 1: Left: One of the Excel Templates produced by the DMiP team. Right: a page from the Data Management iPlant site. To introduce and advertise these materials, over the last 10 months we visited every PFR site in New Zealand bar the very smallest. We gave over 50 seminars/workshops, and over 300 people attended (Figure 2) - a marathon effort, but with a gratifying level of attendance, and lots of positive responses. Figure 2: Andrew McLachlan gives a DMiP seminar at Lincoln. 95250173990“They are easy to follow and to adapt to different situations. They provide a great base for keeping things organized and standardised, ideal for sharing data but also to simplify analyses”“We have used the template for all new projects since we completed the workshop.  We can see the benefits of it and after the workshop feel confident using it”“Very well organised, the metadata pages are important and I wouldn't otherwise include them”00“They are easy to follow and to adapt to different situations. They provide a great base for keeping things organized and standardised, ideal for sharing data but also to simplify analyses”“We have used the template for all new projects since we completed the workshop.  We can see the benefits of it and after the workshop feel confident using it”“Very well organised, the metadata pages are important and I wouldn't otherwise include them”Selected Comments on the Templates from the Feedback Survey: “They are easy to follow and to adapt to different situations. They provide a great base for keeping things organized and standardised, ideal for sharing data but also to simplify analyses” “We have used the template for all new projects since we completed the workshop.  We can see the benefits of it and after the workshop feel confident using it” “Very well organised, the metadata pages are important and I wouldn't otherwise include them” “They are easy to follow and to adapt to different situations. They provide a great base for keeping things organized and standardised, ideal for sharing data but also to simplify analyses” “We have used the template for all new projects since we completed the workshop.  We can see the benefits of it and after the workshop feel confident using it” “Very well organised, the metadata pages are important and I wouldn't otherwise include them” The feedback survey plus anecdotal evidence from Data Science group members suggests that the project has led to widespread improvements in the management of small data sets thus also improving the useability of data and efficiency of data management. However, the feedback also indicated that substantial follow up work – modifications to materials, more workshops, continuing reinforcement of ideas- is required. An approach to carry out this work will be devised in the next few months. The DMiP team (Ruth Butler, Linley Jesson, Andrew McLachlan, Duncan Hedderley, Melanie Davidson and Gareth Hill).</span>
<span class="co">#&gt; 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   The Data Science group is helping PFR to increase its efficiency in handling, managing and exploring data in many ways. To promote a culture of Data Science in the company the group hosted a Data Science Forum - "Everyone a Data Scientist". Over 60 PFR staff attended the two-day event at Lincoln on September 5th and 6th. The meeting started with a discussion on leadership from Roger Robson-Williams about creating a Data Science culture in PFR. Guest speaker Kim Lung Chan, head of Data Science at the Callaghan Institute discussed opportunities for funding for students, research projects and businesses in Data Science and opportunities for increased collaboration between the two institutions. We then had a series of rapid fire talks with themes ranging from Data Management, Statistics, High Performance Computing and New Technologies. The second day ended with a discussion on "How to Solve Our Data Pain Points". These “pain points” included increased automatic data handling and reporting, solutions for long-term data storage, and better data literacy among staff. Many of the solutions revolved around: building a strong and connected Data Science community that regularly engages in training, increasing the numbers of data literate staff, and the importance of metadata (data about data) and consistent formats and descriptors for understanding and sharing data. These discussions help promote a culture of data science at Plant and Food Research, so that our data is Findable, Accessible, Interoperable and Reusable (FAIR). In the long-term increased uptake of data science practices will enable more efficient data capture, handling and processing which can only boost productivity for PFR.</span>
<span class="co">#&gt; 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    The Science Data Facilitation Project is a collaborative project between Data Science and IKS aimed at promoting the best management of research data and ensuring data is Findable, Accessable, Interoperable and Reusable. Data Science member Carmel Woods is working with the Science Data Facilitator Melanie Burns to identify and train one staff member from each science team across the organisation in the role of Data Steward. These Data Stewards work with their teams to identify areas for improvement in data management practices, support the team to make this happen, and keep the momentum going. Currently there are 49 teams (out of 77, 64%) with a Data Steward and 35 (45%) have been trained. The Science Data Facilitation project is also collating the types of data that scientists are working with across the organisation, identifying individuals that want to be involved in discussions around good practice, and determining the best method to have these discussions and agree on good practice. The discussions have commenced with two data types (Genome Assembly and RNA Sequence) and documentation is almost complete. We will then seek feedback on the process and look at ways to improve the process when we select the next data type. This project is well on task to improve the culture of science data management within Plant and Food Research.</span>
<span class="co">#&gt; 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Kate Richards in conjunction with Rolf Turner from Auckland University have been working on a paper to provide a statistical framework for data analysis methods that are used in problems that arise in quarantine research and address the problem of estimating lethal dose values in the context of fumigating export logs against several species of pine beetle. The approach is to make use of generalized linear mixed models on the basis of which we obtain interval estimates of a required lethal dose.  They apply a “worst case scenario” paradigm in making a final choice of model.   They first fit a wide range of models (determined by various choices of model characteristics). Then, after eliminating implausible values, find the maximum of the upper endpoints of the confidence intervals that were found. Then they take this maximum to be the (conservative) estimate of the required lethal dose. This framework was applied to a series of datasets exploring the dose of methyl bromide required to reach probit 9 level mortality. The current regulation for export of logs to china require a 16hr fumigation  at a dose of 80-120g/m3 depending on temperature. Methyl bromide is a ozone depleting fumigant where the gas has to be recaptured. Using the framework described in the paper they were able to predict a lethal dose estimate 50% less than that currently required. This new dose of 40g/m3 is currently be tested in large scale at port trials. Plot of the “fit” of the chosen model. The blue dots are the observed (“raw”) success fractions. The red plus signs are the fitted success fractions with the (random) influence of the replicates included. The black line is the fitted success fraction formed using fixed effects only.</span>
<span class="co">#&gt; 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Members of the Data Applications team have successfully applied computer vision algorithms to two problems: detecting and counting kiwifruit on the vine, and insects on sticky traps. These projects automate activities which are otherwise performed manually. This saves time and money, and allows larger quantities of data to be collected accurately. Interest in computer vision is increasing within PFR and from commercial partners such as Zespri and the seafood industry. Projects such as these help us build capabilities for PFR’s Growing Futures and Technology Development objectives. Fig. 1. Predicted assignment of A) insects on sticky-traps and B) kiwifruit on vines  using machine-learning computer vision algorthms.</span>
<span class="co">#&gt; 7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Give an example here of progress towards delivery of impact through a SIGNIFICANT science achievement.  This is the major part of the report and should be a paragraph or two in length.</span></pre></div>
<p><code><a href="reference/mine_summary.html">mine_summary()</a></code></p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="co"># Extract a summary of the three most important sentences from the text.</span>
<span class="no">summary</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/mine_summary.html">mine_summary</a></span>(<span class="kw">text</span> <span class="kw">=</span> <span class="no">text_df</span>$<span class="no">text</span>[<span class="fl">1</span>], <span class="kw">n_sentences</span> <span class="kw">=</span> <span class="fl">3</span>)
<span class="co">#&gt; Parsing text into sentences and tokens...DONE</span>
<span class="co">#&gt; Calculating pairwise sentence similarities...DONE</span>
<span class="co">#&gt; Applying LexRank...DONE</span>
<span class="co">#&gt; Formatting Output...DONE</span>
<span class="no">summary</span>
<span class="co">#&gt; [1] "New Data Science Group and new Data Applications team PFR’s success is based on good quality science that is produced as efficiently and effectively as possible. To highlight the role that efficient data processing can help to improve our outputs, Data Application team members Linley Jesson and Peter Jaksons have been working with members of the Field Crops group, also in Sustainable Production (Edmar Teixiera, Ellen Hume, Jo Sharp) IKS’s Eric Burgueño and NCI’s Hymmi Kong to deploy the simulation tools APSIM Classic and APSIM Next Generation in High Performance Computing system in powerPlant. Other examples of data pipelines in which the new Data Applications team has already been instrumental in are genomic selection projects for both apples and kiwifruit."</span></pre></div>
<p><code><a href="reference/mine_keywords.html">mine_keywords()</a></code></p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="co"># Extract the n most frequent keywords from a text.</span>
<span class="no">keywords</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/mine_keywords.html">mine_keywords</a></span>(<span class="kw">text</span> <span class="kw">=</span> <span class="no">text_df</span>$<span class="no">text</span>[<span class="fl">1</span>], <span class="kw">barplot</span> <span class="kw">=</span> <span class="no">T</span>, <span class="kw">wordcloud</span> <span class="kw">=</span> <span class="no">T</span>)
<span class="no">keywords</span>
<span class="co">#&gt;           keyword ngram freq</span>
<span class="co">#&gt; 1            data     1   16</span>
<span class="co">#&gt; 2     application     1    7</span>
<span class="co">#&gt; 3            team     1    6</span>
<span class="co">#&gt; 4             new     1    5</span>
<span class="co">#&gt; 5           group     1    5</span>
<span class="co">#&gt; 6         quality     1    4</span>
<span class="co">#&gt; 7         project     1    4</span>
<span class="co">#&gt; 8         genomic     1    4</span>
<span class="co">#&gt; 9      simulation     1    4</span>
<span class="co">#&gt; 10            use     1    4</span>
<span class="co">#&gt; 11            key     1    3</span>
<span class="co">#&gt; 12           help     1    3</span>
<span class="co">#&gt; 13        develop     1    3</span>
<span class="co">#&gt; 14           tool     1    3</span>
<span class="co">#&gt; 15    performance     1    3</span>
<span class="co">#&gt; 16        climate     1    3</span>
<span class="co">#&gt; 17          large     1    3</span>
<span class="co">#&gt; 18 interpretation     1    2</span>
<span class="co">#&gt; 19         output     1    2</span>
<span class="co">#&gt; 20           file     1    2</span>
<span class="co">#&gt; 21           crop     1    2</span>
<span class="co">#&gt; 22          other     1    2</span>
<span class="co">#&gt; 23       variable     1    2</span>
<span class="co">#&gt; 24         change     1    2</span>
<span class="co">#&gt; 25      precision     1    2</span>
<span class="co">#&gt; 26           such     1    2</span>
<span class="co">#&gt; 27      selection     1    2</span>
<span class="co">#&gt; 28            set     1    2</span>
<span class="co">#&gt; 29           time     1    2</span>
<span class="co">#&gt; 30       limiting     1    1</span></pre></div>
<p><code><a href="reference/mine_sentiment.html">mine_sentiment()</a></code></p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="co"># Analyse the sentiment of a text.</span>
<span class="no">text</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"I really love working at Plant and Food Research. It is great."</span>,
          <span class="st">"Today I investigated methods in sentiment analysis."</span>,
          <span class="st">"The results were not very pleasing. &lt;U+0001F612&gt;"</span>,
          <span class="st">"Sentiment anaylsis is amazing! Especially for emojis. &lt;U+0001F497&gt;&lt;U+0001F600&gt;"</span>)

<span class="no">sentiment</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/mine_sentiment.html">mine_sentiment</a></span>(<span class="kw">text</span> <span class="kw">=</span> <span class="no">text</span>)
<span class="no">sentiment</span>
<span class="co">#&gt;                                                                         text</span>
<span class="co">#&gt; 1             I really love working at Plant and Food Research. It is great.</span>
<span class="co">#&gt; 2                        Today I investigated methods in sentiment analysis.</span>
<span class="co">#&gt; 3                             The results were not very pleasing. \U0001f612</span>
<span class="co">#&gt; 4 Sentiment anaylsis is amazing! Especially for emojis. \U0001f497\U0001f600</span>
<span class="co">#&gt;   sentence_id word_count        sd ave_sentiment direction</span>
<span class="co">#&gt; 1           1         12 0.3144208         0.511  positive</span>
<span class="co">#&gt; 2           2          7 0.0000000         0.000   neutral</span>
<span class="co">#&gt; 3           3          6 0.1299038        -0.287  negative</span>
<span class="co">#&gt; 4           4          7 0.1443376         0.456  positive</span>
<span class="no">sentiment_by_sentence</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/mine_sentiment.html">mine_sentiment</a></span>(<span class="kw">text</span> <span class="kw">=</span> <span class="no">text</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"sentence"</span>)
<span class="no">sentiment_by_sentence</span>
<span class="co">#&gt;                                                  text sentence_id</span>
<span class="co">#&gt; 1   I really love working at Plant and Food Research.           1</span>
<span class="co">#&gt; 2                                        It is great.           1</span>
<span class="co">#&gt; 3 Today I investigated methods in sentiment analysis.           2</span>
<span class="co">#&gt; 4                The results were not very pleasing.            3</span>
<span class="co">#&gt; 5                                          \U0001f612           3</span>
<span class="co">#&gt; 6                      Sentiment anaylsis is amazing!           4</span>
<span class="co">#&gt; 7                             Especially for emojis.            4</span>
<span class="co">#&gt; 8                                          \U0001f497           4</span>
<span class="co">#&gt; 9                                          \U0001f600           4</span>
<span class="co">#&gt;   word_count sd ave_sentiment direction</span>
<span class="co">#&gt; 1          9  0         0.733  positive</span>
<span class="co">#&gt; 2          3  0         0.289  positive</span>
<span class="co">#&gt; 3          7  0         0.000   neutral</span>
<span class="co">#&gt; 4          6  0        -0.184  negative</span>
<span class="co">#&gt; 5          0  0        -0.187  negative</span>
<span class="co">#&gt; 6          4  0         0.250  positive</span>
<span class="co">#&gt; 7          3  0         0.000   neutral</span>
<span class="co">#&gt; 8          0  0         0.330  positive</span>
<span class="co">#&gt; 9          0  0         0.286  positive</span></pre></div>
<p><code><a href="reference/highlight_sentiment.html">highlight_sentiment()</a></code></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co">#&gt; Saved in ./polarity.html</span></a></code></pre></div>

<meta charset="utf-8">
<title>
Polarity
</title>
<style>
  mark.positive{
      background-color: lightgreen;
      color: black;
  }
  
  mark.negative{
      background-color: pink;
      color: black;
  }
  h1 { 
      display: block;
      font-size: 1.2em;
      margin-top: 0.0em;
      margin-bottom: 0.0em;
      margin-left: 0;
      margin-right: 0;
      font-weight: bold;
  }
  .indented {
      margin-left: 5%;
      margin-right: 5%;
  }
</style>
<h1>
1: <em><span style="color: green">+.511</span></em>
</h1>
<p class="indented">
<mark class="positive">I really love working at Plant and Food Research. It is great.</mark></p>
<h1>
2: <em><span style="color: #D0D0D0">.000</span></em>
</h1>
<p class="indented">
Today I investigated methods in sentiment analysis.
</p>
<h1>
3: <em><span style="color: red">-.287</span></em>
</h1>
<p class="indented">
<mark class="negative">The results were not very pleasing. 😒</mark></p>
<h1>
4: <em><span style="color: green">+.456</span></em>
</h1>
<p class="indented">
<mark class="positive">Sentiment anaylsis is amazing! Especially for emojis. 💗😀</mark></p>

</div>
<div id="see-also" class="section level2">
<h2 class="hasAnchor">
<a href="#see-also" class="anchor"></a>See Also</h2>
<ul>
<li><a href="https://github.com/PlantandFoodResearch/PFRTextMiner/blob/master/vignettes/pfrtextminer.Rmd">Vignette</a></li>
</ul>
<div id="sessioninfo" class="section level4">
<h4 class="hasAnchor">
<a href="#sessioninfo" class="anchor"></a>sessionInfo</h4>
<div class="sourceCode" id="cb12"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span>()
<span class="co">#&gt; R version 3.5.0 (2018-04-23)</span>
<span class="co">#&gt; Platform: x86_64-pc-linux-gnu (64-bit)</span>
<span class="co">#&gt; Running under: CentOS Linux 7 (Core)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Matrix products: default</span>
<span class="co">#&gt; BLAS: /software/statistical/R-3.5.0/lib64/R/lib/libRblas.so</span>
<span class="co">#&gt; LAPACK: /software/statistical/R-3.5.0/lib64/R/lib/libRlapack.so</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; locale:</span>
<span class="co">#&gt;  [1] LC_CTYPE=en_NZ.UTF-8       LC_NUMERIC=C              </span>
<span class="co">#&gt;  [3] LC_TIME=en_NZ.UTF-8        LC_COLLATE=en_NZ.UTF-8    </span>
<span class="co">#&gt;  [5] LC_MONETARY=en_NZ.UTF-8    LC_MESSAGES=en_NZ.UTF-8   </span>
<span class="co">#&gt;  [7] LC_PAPER=en_NZ.UTF-8       LC_NAME=C                 </span>
<span class="co">#&gt;  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span>
<span class="co">#&gt; [11] LC_MEASUREMENT=en_NZ.UTF-8 LC_IDENTIFICATION=C       </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attached base packages:</span>
<span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; other attached packages:</span>
<span class="co">#&gt; [1] PFRTextMiner_0.1.0 testthat_2.2.1    </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; loaded via a namespace (and not attached):</span>
<span class="co">#&gt;  [1] httr_1.4.1              pkgload_1.0.2          </span>
<span class="co">#&gt;  [3] R.utils_2.6.0           textreadr_0.9.0        </span>
<span class="co">#&gt;  [5] assertthat_0.2.1        getPass_0.2-2          </span>
<span class="co">#&gt;  [7] selectr_0.4-1           cellranger_1.1.0       </span>
<span class="co">#&gt;  [9] yaml_2.2.0              remotes_2.1.0          </span>
<span class="co">#&gt; [11] sessioninfo_1.1.1       pillar_1.4.2           </span>
<span class="co">#&gt; [13] backports_1.1.4         lattice_0.20-35        </span>
<span class="co">#&gt; [15] glue_1.3.1              digest_0.6.20          </span>
<span class="co">#&gt; [17] RColorBrewer_1.1-2      rvest_0.3.4            </span>
<span class="co">#&gt; [19] colorspace_1.4-1        udpipe_0.8.3           </span>
<span class="co">#&gt; [21] htmltools_0.3.6         Matrix_1.2-14          </span>
<span class="co">#&gt; [23] R.oo_1.22.0             XML_3.98-1.20          </span>
<span class="co">#&gt; [25] pkgconfig_2.0.2         devtools_2.1.0.9000    </span>
<span class="co">#&gt; [27] qdapRegex_0.7.2         textshape_1.6.0        </span>
<span class="co">#&gt; [29] purrr_0.3.2             scales_1.0.0           </span>
<span class="co">#&gt; [31] lexRankr_0.5.2          processx_3.4.1         </span>
<span class="co">#&gt; [33] tibble_2.1.3            ggplot2_3.2.1          </span>
<span class="co">#&gt; [35] usethis_1.5.1           withr_2.1.2            </span>
<span class="co">#&gt; [37] lazyeval_0.2.2          cli_1.1.0              </span>
<span class="co">#&gt; [39] magrittr_1.5            crayon_1.3.4           </span>
<span class="co">#&gt; [41] readxl_1.3.1            memoise_1.1.0          </span>
<span class="co">#&gt; [43] evaluate_0.14           ps_1.3.0               </span>
<span class="co">#&gt; [45] R.methodsS3_1.7.1       fs_1.3.1               </span>
<span class="co">#&gt; [47] SnowballC_0.6.0         xml2_1.2.1             </span>
<span class="co">#&gt; [49] pkgbuild_1.0.3          tools_3.5.0            </span>
<span class="co">#&gt; [51] data.table_1.12.2       prettyunits_1.0.2      </span>
<span class="co">#&gt; [53] sentimentr_2.8.0        stringr_1.4.0          </span>
<span class="co">#&gt; [55] munsell_0.5.0           callr_3.3.1            </span>
<span class="co">#&gt; [57] compiler_3.5.0          lexicon_1.2.1          </span>
<span class="co">#&gt; [59] rlang_0.4.0             grid_3.5.0             </span>
<span class="co">#&gt; [61] textrank_0.3.0          rstudioapi_0.10        </span>
<span class="co">#&gt; [63] igraph_1.2.4.1          labeling_0.3           </span>
<span class="co">#&gt; [65] rmarkdown_1.14          gtable_0.3.0           </span>
<span class="co">#&gt; [67] RLinuxModules_0.3       curl_4.0               </span>
<span class="co">#&gt; [69] SentimentAnalysis_1.3-3 R6_2.4.0               </span>
<span class="co">#&gt; [71] knitr_1.23              dplyr_0.8.3            </span>
<span class="co">#&gt; [73] textclean_0.9.3         rprojroot_1.3-2        </span>
<span class="co">#&gt; [75] desc_1.2.0              syuzhet_1.0.4          </span>
<span class="co">#&gt; [77] stringi_1.4.3           Rcpp_1.0.2             </span>
<span class="co">#&gt; [79] wordcloud_2.6           tidyselect_0.2.5       </span>
<span class="co">#&gt; [81] xfun_0.8</span></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/PlantandFoodResearch/PFRTextMiner/">https://​github.com/​PlantandFoodResearch/​PFRTextMiner/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Blake List <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Blake List.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
